---
const currentLocale = Astro.currentLocale || "en";
const currentPath = Astro.url.pathname;

// Remove locale prefix from path to get base path
const basePath = currentPath.replace(/^\/(fr|en)/, "") || "/";

// Determine the alternate locale and path
const alternateLocale = currentLocale === "fr" ? "en" : "fr";
const alternatePath = alternateLocale === "fr" ? `/fr${basePath}` : basePath;
---

<div class="relative inline-block">
  <a
    href={alternatePath}
    class="flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-neutral-600 transition duration-300 hover:bg-neutral-200 dark:text-neutral-400 dark:hover:bg-neutral-700"
    aria-label={`Switch to ${alternateLocale === "fr" ? "French" : "English"}`}
  >
    <svg
      class="h-4 w-4"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"
      ></path>
    </svg>
    <span class="uppercase">{alternateLocale}</span>
  </a>
</div>
