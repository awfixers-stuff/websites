---
import { iconFromName } from "@/utils/icon";
import {
  AlertTriangle,
  CheckCircle,
  Info,
  Star,
  XOctagon,
} from "react-feather";

export type BannerVariant =
  | "primary"
  | "secondary"
  | "info"
  | "danger"
  | "success"
  | "warning";

const defaultVariant: BannerVariant = "primary";

export interface Props {
  variant?: BannerVariant;
  icon?: string;
  iconName?: string;
  hideIcon?: boolean;
  className?: string;
  textContainerStyles?: string;
}

const { 
  variant = defaultVariant, 
  icon, 
  iconName, 
  hideIcon = false, 
  className = "", 
  textContainerStyles = "" 
} = Astro.props;

// Map variants to Tailwind classes
const variantClasses: Record<BannerVariant, string> = {
  primary: "bg-blue-600 text-white",
  secondary: "bg-gray-200 text-gray-900",
  info: "bg-blue-100 text-blue-900 border-blue-500",
  danger: "bg-red-100 text-red-900 border-red-500",
  success: "bg-green-100 text-green-900 border-green-500",
  warning: "bg-yellow-100 text-yellow-900 border-yellow-500",
};

// Map icon names to components
const iconComponents: Record<string, any> = {
  AlertTriangle,
  CheckCircle,
  Info,
  Star,
  XOctagon,
};

const bannerClass = variantClasses[variant] || variantClasses.primary;
const iconComponent = icon ? (iconComponents[icon] || iconComponents[iconFromName(icon)]) : null;

---

<div class={`rounded-md border p-4 ${bannerClass} ${className}`}>
  {iconComponent && !hideIcon && (
    <div class="flex-shrink-0 mr-3">
      {iconComponent({ size: 20 })}
    </div>
  )}
  <div class={`text-container ${textContainerStyles}`}>
    <slot />
  </div>
</div>