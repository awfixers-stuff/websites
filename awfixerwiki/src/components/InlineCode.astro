---
import { useTheme } from "../styles/theme";
import { darkCodeTheme, lightCodeTheme } from "../styles/codeThemes";
import { useIsMounted } from "@/hooks/useIsMounted";
import InlineCodeIsland from "../islands/InlineCodeIsland.tsx";

const colorModeSSR = Astro.locals.colorMode;
const isMounted = useIsMounted();

const colorMode = !isMounted ? colorModeSSR : useTheme().colorMode;
const theme = colorMode === "light" ? lightCodeTheme : darkCodeTheme;
---

<code
  className="rounded font-mono whitespace-nowrap inline-block before:content-[''] after:content-['']"
  style={{
    backgroundColor: String(theme['pre[class*="language-"]'].background),
    color: theme['code[class*="language-"]'].color,
    padding: "0.15rem 0.50rem 0px 0.50rem",
  }}
  data-colormode={colorMode}
>
  <InlineCodeIsland client:load />
</code>